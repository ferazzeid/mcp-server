# Nginx configuration for MCP Server
# Place in: /etc/nginx/sites-available/mcp-server
# Then: sudo ln -s /etc/nginx/sites-available/mcp-server /etc/nginx/sites-enabled/
# Finally: sudo nginx -t && sudo systemctl reload nginx

server {
    listen 80;
    server_name your-domain.com;  # Replace with your domain

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        
        # Important for SSE
        proxy_set_header X-Accel-Buffering no;
        proxy_buffering off;
        proxy_read_timeout 86400s;
        proxy_send_timeout 86400s;
    }

    # Health check endpoint
    location /health {
        proxy_pass http://localhost:3000/health;
        access_log off;
    }
}

# After initial setup, use certbot for HTTPS:
# sudo certbot --nginx -d your-domain.com

